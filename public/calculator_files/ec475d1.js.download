!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5f5bf16f-17dc-418a-91bf-b5c59e97aede",e._sentryDebugIdIdentifier="sentry-dbid-5f5bf16f-17dc-418a-91bf-b5c59e97aede")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"4.53.4-prod"},(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{1811:function(e,t,n){"use strict";n.r(t);n(128),n(43),n(45),n(44),n(63),n(40),n(66);var r=n(3),o=n(6),c=n(26),l=n(27),f=n(61),d=n(62),v=n(31),y=(n(103),n(5),n(65),n(18),n(76),n(949)),h=n(1),m=n(951),w=n.n(m),O=n(180),k=n(952),S=n(67);function j(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function I(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(v.a)(e);if(t){var o=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var P=Object(m.namespace)("core"),R=Object(m.namespace)("system"),A=Object(m.namespace)("users"),C=Object(m.namespace)("swap"),x=function(e){Object(f.a)(v,e);var t,n,r,d=L(v);function v(){var e;return Object(c.a)(this,v),(e=d.apply(this,arguments)).isShow=!1,e.availableMargin="",e.longLeverage="",e.shortLeverage="",e.contracts=[],e.currentSymbolName="",e.fiatCurrency={},e.takerFeeRateVip=0,e.marginTieredList=[],e.socketAuth=!1,e.initSocket=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.$swapSocket.account.auth(t).then((function(t){t&&(e.socketAuth=!0,e.subSwapPosition())}))},e}return Object(l.a)(v,[{key:"initLoginState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(n){if(e.isInApp)e.$bridge.getToken(t).then((function(t){return e.updateLoginState({isLogin:!!(null==t?void 0:t.token),token:null==t?void 0:t.token}),n(e.isLogin)}));else{var r=e.$cookies.get(O.a);e.updateLoginState({isLogin:!!r,token:r}),n(e.isLogin)}}))}},{key:"liquidationRelationalData",get:function(){return{accountPositions:this.swapPosition.positions,takerFeeRateVip:this.takerFeeRateVip,isMultiSymbolCrossMode:this.swapPosition.isMultiSymbolCrossMode,balance:this.swapPosition.balance,accIsolatedPosMargin:this.swapPosition.accIsolatedPosMargin,userId:this.userInfo&&this.userInfo.uid}}},{key:"getAccountInfo",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,symbol,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLogin){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getUserInfo();case 4:return n=this.$route.query.symbol,symbol=void 0===n?window.symbol:n,e.next=7,this.$api.swap.getAccountInfo(null===(t=this.userInfo)||void 0===t?void 0:t.uid,symbol).then((function(e){if(e.account){var t=e.account,n=t.availableMargin,o=t.longLeverage,c=t.shortLeverage;r.availableMargin=n||"",r.longLeverage=o||"",r.shortLeverage=c||""}}));case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getAccountVipInfos",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLogin){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.$api.swap.getVipInfos().then((function(e){var n,r;if(0===e.code){var o=(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.swapTakerCommission)||(null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.swapTakerCommissionOriginal);t.takerFeeRateVip=o?Object(S.g)(o,100):0}}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getQuoteContracts",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$api.swap.getQuoteContracts("COIN").then((function(e){var n;t.contracts=e.contracts||[],t.contracts.length>0&&(t.currentSymbolName&&t.contracts.some((function(e){return e.name===t.currentSymbolName}))||(t.currentSymbolName=null===(n=t.contracts[0])||void 0===n?void 0:n.name))}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getLiquidationPrice",value:function(e){return this.userInfo&&this.userInfo.uid&&(e=I({userId:this.userInfo.uid},e)),this.$api.swap.getOrderLiquidationPrice(e)}},{key:"getAccMortgageAsset",value:function(e){return this.userInfo&&this.userInfo.uid&&(e=I({userId:this.userInfo.uid},e)),this.$api.swap.getOrderAccMortgageAsset(e)}},{key:"getMaintenanceTieredList",value:function(e){try{return this.userInfo&&this.userInfo.uid&&(e=I({userId:this.userInfo.uid},e)),this.$api.swap.swapMarginTiered(I({},e))}catch(e){console.log("getMaintenanceTieredList failed",e)}}},{key:"mounted",value:function(){var e=this,t=document.querySelector("body");t&&(t.style.background="white");var n=this.$route.query,r=n.symbol,symbol=void 0===r?"":r,c=n.fiatSymbol,l=void 0===c?"":c,f=n.fiatRate,d=void 0===f?"":f;this.currentSymbolName=symbol.replace(/-/,"/"),l&&d&&(this.fiatCurrency={fiatSymbol:l,rate:d}),this.initLoginState().then(Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAccountInfo();case 2:return t.next=4,e.getQuoteContracts();case 4:return t.next=6,e.getAccountVipInfos();case 6:e.initSocket(),e.isShow=!0;case 8:case"end":return t.stop()}}),t)}))))}},{key:"beforeDestroy",value:function(){this.unSubSwapPosition();var e=document.querySelector("body");e&&(e.style.background="")}},{key:"head",value:function(){return{title:this.$i18n.t("profitCalculator.title")}}}]),v}(h.default);Object(y.a)([P.State],x.prototype,"isLogin",void 0),Object(y.a)([P.State],x.prototype,"isInApp",void 0),Object(y.a)([R.Getter],x.prototype,"reverseLayout",void 0),Object(y.a)([R.Getter],x.prototype,"klineColor",void 0),Object(y.a)([A.State],x.prototype,"userInfo",void 0),Object(y.a)([C.State],x.prototype,"swapPosition",void 0),Object(y.a)([A.Action],x.prototype,"getUserInfo",void 0),Object(y.a)([C.Action("subScribePosition")],x.prototype,"subSwapPosition",void 0),Object(y.a)([C.Action("unSubscribePosition")],x.prototype,"unSubSwapPosition",void 0),Object(y.a)([P.Action],x.prototype,"updateLoginState",void 0);var M=x=Object(y.a)([w()({name:"index",components:{Calculator:k.e}})],x),$=n(127),component=Object($.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"swap-calculator"},[e.isShow?n("Calculator",{attrs:{"is-login":e.isLogin,"reverse-layout":e.reverseLayout,"kline-color":e.klineColor,"available-margin":e.availableMargin,"long-leverage":e.longLeverage,"short-leverage":e.shortLeverage,"symbol-options":e.contracts,"fiat-currency":e.fiatCurrency,"current-symbol-name":e.currentSymbolName,"liquidation-relational-data":e.liquidationRelationalData}}):e._e()],1)}),[],!1,null,"79e3f777",null);t.default=component.exports}}]);
